---
import Base from '../../layouts/Base.astro';
import { getCollection } from 'astro:content';

const days = (await getCollection('days')).sort((a, b) => b.data.date.localeCompare(a.data.date));
const rawBase = import.meta.env.BASE_URL;
const base = rawBase.endsWith('/') ? rawBase : rawBase + '/';
---

<Base title="Days">
  <h1>일별 기록</h1>
  <p>매일 토큰으로 뭘 했는지 기록합니다.</p>

  {days.length === 0 ? (
    <p style="color: var(--muted);">아직 기록이 없습니다.</p>
  ) : (
    days.map(day => (
      <a href={`${base}days/${day.id}/`} style="text-decoration: none; color: inherit;">
        <div class="day-card">
          <h3>{day.data.title}</h3>
          <div class="meta">
            {day.data.date} · 토큰: {day.data.tokens} · {day.data.problems}개 문제 해결
          </div>
        </div>
      </a>
    ))
  )}
</Base>
