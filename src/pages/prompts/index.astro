---
import Base from '../../layouts/Base.astro';
import { getCollection, render } from 'astro:content';

const prompts = (await getCollection('prompts')).sort((a, b) =>
  b.data.date.localeCompare(a.data.date)
);

const rendered = await Promise.all(
  prompts.map(async (p) => ({ ...p, content: await render(p) }))
);
---

<Base title="Prompts">
  <h1>프롬프트 모음</h1>
  <p>실제로 사용한 프롬프트들입니다. 복사해서 직접 써보세요.</p>

  {rendered.map(prompt => (
    <div style="margin-bottom: 2.5rem;">
      <h2>{prompt.data.title}</h2>
      <p style="color: var(--muted); font-size: 0.9rem; margin-bottom: 0.5rem;">
        {prompt.data.category} · {prompt.data.date}
      </p>
      <p>{prompt.data.description}</p>
      <div class="prompt-block">
        <button class="copy-btn">Copy</button>
        <prompt.content.Content />
      </div>
    </div>
  ))}
</Base>
